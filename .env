###############################################################################
# Application
###############################################################################

# Environment name (development, staging, production)
ENV=development

# FastAPI settings
APP_NAME=llm-metadata-harvester-service
APP_HOST=0.0.0.0
APP_PORT=8000
LOG_LEVEL=info

###############################################################################
# Redis (Celery broker + result backend + rate limiting)
###############################################################################

# Redis URL for Celery broker
CELERY_BROKER_URL=redis://localhost:6379/0

# Redis URL for Celery result backend
CELERY_RESULT_BACKEND=redis://localhost:6379/1

# Redis URL for API rate limiting (SlowAPI)
RATE_LIMIT_REDIS_URL=redis://localhost:6379/2

###############################################################################
# Celery
###############################################################################

# Max tasks a worker will execute before being replaced
CELERY_WORKER_MAX_TASKS_PER_CHILD=100

# Time limit (hard) for task execution (seconds)
CELERY_TASK_TIME_LIMIT=3600

# Time limit (soft) for graceful shutdown (seconds)
CELERY_TASK_SOFT_TIME_LIMIT=3500

###############################################################################
# Apptainer
###############################################################################

# Absolute path to Apptainer binary (inside worker container or host)
APPTAINER_BINARY=/usr/bin/apptainer

# Path to the Apptainer image (.sif)
APPTAINER_IMAGE_PATH=/opt/containers/LLM-metadata-harvester-service.sif

# Default Apptainer execution flags
#APPTAINER_FLAGS= --cleanenv --containall --no-home

###############################################################################
# Security & Limits
###############################################################################

# Maximum number of concurrent jobs allowed per user
MAX_CONCURRENT_JOBS_PER_USER=3

# Max request payload size (bytes)
MAX_REQUEST_SIZE=10485760  # 10 MB

###############################################################################
# Authentication (placeholder)
###############################################################################

# Example: API authentication mode
# none | api_key | jwt
AUTH_MODE=none

# Used only if AUTH_MODE=jwt
JWT_PUBLIC_KEY=
JWT_ISSUER=
JWT_AUDIENCE=

###############################################################################
# Database (optional job metadata persistence)
###############################################################################

# Leave empty if not using PostgreSQL
DATABASE_URL=

###############################################################################
# Observability (optional)
###############################################################################

# Enable Prometheus metrics
ENABLE_METRICS=false

# Log format: json or plain
LOG_FORMAT=plain
